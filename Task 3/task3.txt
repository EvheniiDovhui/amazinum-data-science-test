# ймовірності випадіння орла для 4 різних монет
p = [0.12, 0.27, 0.21, 0.96]

# початкові припущення (апріорна ймовірність): 
# ми не знаємо, яка монета в руках, тому кожна має шанс 25% (0.25)
h = [0.25] * 4

# результати вже проведених кидків (H - орел, T - решка)
d = 'HHHTHTHHH'

def solve(h, d):
    res = []
    for r in d:
        # крок 1 оновлюється "вага" кожної монети
        # якщо випав орел (H), множимо на p[i] якщо решка (T) — на (1 - p[i])
        h = [h[i] * (p[i] if r == 'H' else 1 - p[i]) for i in range(4)]
        
        # крок 2 нормалізація
        # рахується загальна сума, щоб привести ваги назад до формату ймовірностей (сума = 1)
        s = sum(h)
        h = [v / s for v in h]
        
        # крок 3 прогноз наступного кидка
        # рахується математичне очікування сумується (шанс монети * наша віра в те, що вона у нас)
        next_flip_prob = sum(p[i] * h[i] for i in range(4))
        res.append(round(next_flip_prob, 2))
        
    return res

# вивід
print(solve(h, d))